# [Ruby V] Sushi - 17711 

[문제 링크](https://www.acmicpc.net/problem/17711) 

### 성능 요약

메모리: 2168 KB, 시간: 4 ms

### 분류

자료 구조, 우선순위 큐, 제곱근 분할법

### 제출 일자

2025년 9월 23일 21:56:41

### 문제 설명

<p>回転寿司屋 JOI では寿司の乗った皿を環状のベルトコンベアで運んでいる．ベルトコンベアは反時計回 りに回っている．現在，店内には客 1 から客 N までの N 人の客がいて，客はベルトコンベアの周りに番 号順に反時計回りに並んでいる．客 N の隣には客 1 が座っている．</p>

<p>客は 1 人 1 枚ずつの皿を持っている．各皿には価格と呼ばれる値が定まっており，店を出る際に，客は， 自分の持っている皿の価格に等しい金額を支払う．</p>

<p>回転寿司屋 JOI では，一風変わったタイムセールを実施している．このタイムセールでは，Q 回に分け て，順番に板前から皿が提供される．i 回目 (1 ≦ i ≦ Q) の皿の提供の内容は 3 個の整数の組 (S<sub>i</sub>, T<sub>i</sub>, P<sub>i</sub>) で 表される． タイムセールのルールは次の通りである．タイムセールが始まる直前に，板前はベルトコンベア上の皿 を全て回収する．以下の 1～3 を i = 1, 2, . . . , Q まで繰り返す．</p>

<ol>
	<li>板前がベルトコンベアの客 S<sub>i</sub> の前の位置に，価格 P<sub>i</sub> の皿を置く．</li>
	<li>皿は客 S<sub>i</sub> の場所から客 T<sub>i</sub> の場所までベルトコンベア上を移動する．それぞれの客は，自分の前の皿 に対し，次の行動を行う．
	<ul>
		<li>もし，その皿の価格が自分の持っている皿の価格より小さいならば，自分の皿とベルトコンベ ア上の皿を交換する．</li>
		<li>もし，その皿の価格が自分の持っている皿の価格以上であれば，皿の交換は行わない．</li>
	</ul>
	</li>
	<li>皿が客 Ti の前を通過した後，板前がその皿を回収する．</li>
</ol>

<p>あなたは板前のもとで職人修業をしている弟子であり，店の皿洗いを任せられている．回転寿司屋 JOI の皿は価格によって洗い方が異なる．あなたは皿洗いの準備のために，タイムセールにおける Q 回の提供 において板前がどの価格の皿を回収するのかをあらかじめ知っておきたい．</p>

<p>S<sub>i</sub> = T<sub>i</sub> のときは，客 S<sub>i</sub> のみが 2 つ目の行動を行う．</p>

<p>それぞれの客がタイムセールの直前に持っている皿の情報と，タイムセールにおける皿の提供の情報が 与えられたとき，それぞれの皿の提供で板前が回収する皿の価格を求めるプログラムを作成せよ．</p>

### 입력 

 <p>標準入力から以下のデータを読み込め．</p>

<ul>
	<li>1 行目には，整数 N, Q が空白を区切りとして書かれている．これは，客の人数が N 人，タイムセー ルにおける皿の提供回数が Q 回であることを表す．</li>
	<li>続く N 行のうちの i 行目 (1 ≦ i ≦ N) には，整数 X<sub>i</sub> が書かれている．これは，客 i がタイムセールの 直前に価格 X<sub>i</sub> の皿を持っていることを表す．</li>
	<li>続く Q 行のうちの i 行目 (1 ≦ i ≦ Q) には，整数 S<sub>i</sub>, T<sub>i</sub>, P<sub>i</sub> が空白を区切りとして書かれている．これ は，i 回目の皿の提供が組 (S<sub>i</sub>, T<sub>i</sub>, P<sub>i</sub>) で表されることを表す．</li>
</ul>

### 출력 

 <p>出力は Q 行からなる．標準出力の i 行目 (1 ≦ i ≦ Q) には，i 回目の皿の提供で板前が回収する皿の価格 を表す整数を出力せよ．</p>

